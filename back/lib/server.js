'use strict';

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

var _TeamsRoutes = require('./routes/TeamsRoutes');

var _TeamsRoutes2 = _interopRequireDefault(_TeamsRoutes);

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _CustomLogger = require('./config/CustomLogger');

var _CustomLogger2 = _interopRequireDefault(_CustomLogger);

var _expressSession = require('express-session');

var _expressSession2 = _interopRequireDefault(_expressSession);

var _keycloakConnect = require('keycloak-connect');

var _keycloakConnect2 = _interopRequireDefault(_keycloakConnect);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const app = (0, _express2.default)();
const router = _express2.default.Router();

const memoryStore = new _expressSession2.default.MemoryStore();

const keycloak = new _keycloakConnect2.default({
    store: memoryStore
});

const sessionOptions = {
    secret: 'd2188556-28d1-445f-8775-7fd64d3457c6',
    bearerOnly: true,
    resave: false,
    saveUninitialized: true,
    store: memoryStore
};

app.use((0, _expressSession2.default)(sessionOptions));
app.use(keycloak.middleware());
app.use(router);
//chargement de l'api teamsRoutes
(0, _TeamsRoutes2.default)(app, router, keycloak);

//lancement du serveur
app.listen(3000, () => {
    console.log('Server running on port 3000');
});

app.use(_bodyParser2.default.urlencoded({ extended: false }));
app.use(_bodyParser2.default.json());

//chargemetn des loggers
(0, _CustomLogger2.default)();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2FwcC9zZXJ2ZXIuanMiXSwibmFtZXMiOlsiYXBwIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsIm1lbW9yeVN0b3JlIiwic2Vzc2lvbiIsIk1lbW9yeVN0b3JlIiwia2V5Y2xvYWsiLCJLZXljbG9hayIsInN0b3JlIiwic2Vzc2lvbk9wdGlvbnMiLCJzZWNyZXQiLCJiZWFyZXJPbmx5IiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJ1c2UiLCJtaWRkbGV3YXJlIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBR0EsTUFBTUEsTUFBTSx3QkFBWjtBQUNBLE1BQU1DLFNBQVNDLGtCQUFRQyxNQUFSLEVBQWY7O0FBRUEsTUFBTUMsY0FBYyxJQUFJQyx5QkFBUUMsV0FBWixFQUFwQjs7QUFFQSxNQUFNQyxXQUFXLElBQUlDLHlCQUFKLENBQWE7QUFDMUJDLFdBQU9MO0FBRG1CLENBQWIsQ0FBakI7O0FBTUEsTUFBTU0saUJBQWlCO0FBQ25CQyxZQUFRLHNDQURXO0FBRW5CQyxnQkFBWSxJQUZPO0FBR25CQyxZQUFRLEtBSFc7QUFJbkJDLHVCQUFtQixJQUpBO0FBS25CTCxXQUFPTDtBQUxZLENBQXZCOztBQVFBSixJQUFJZSxHQUFKLENBQVEsOEJBQVFMLGNBQVIsQ0FBUjtBQUNBVixJQUFJZSxHQUFKLENBQVFSLFNBQVNTLFVBQVQsRUFBUjtBQUNBaEIsSUFBSWUsR0FBSixDQUFRZCxNQUFSO0FBQ0E7QUFDQSwyQkFBWUQsR0FBWixFQUFpQkMsTUFBakIsRUFBeUJNLFFBQXpCOztBQUVBO0FBQ0FQLElBQUlpQixNQUFKLENBQVcsSUFBWCxFQUFpQixNQUFNO0FBQ25CQyxZQUFRQyxHQUFSLENBQVksNkJBQVo7QUFDSCxDQUZEOztBQUlBbkIsSUFBSWUsR0FBSixDQUFRSyxxQkFBV0MsVUFBWCxDQUFzQixFQUFDQyxVQUFVLEtBQVgsRUFBdEIsQ0FBUjtBQUNBdEIsSUFBSWUsR0FBSixDQUFRSyxxQkFBV0csSUFBWCxFQUFSOztBQUVBO0FBQ0EiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IHRlYW1zUm91dGVzIGZyb20gJy4vcm91dGVzL1RlYW1zUm91dGVzJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuL2NvbmZpZy9DdXN0b21Mb2dnZXInO1xuaW1wb3J0IHNlc3Npb24gZnJvbSAnZXhwcmVzcy1zZXNzaW9uJztcbmltcG9ydCBLZXljbG9hayBmcm9tICdrZXljbG9hay1jb25uZWN0JztcblxuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zdCBtZW1vcnlTdG9yZSA9IG5ldyBzZXNzaW9uLk1lbW9yeVN0b3JlKCk7XG5cbmNvbnN0IGtleWNsb2FrID0gbmV3IEtleWNsb2FrKHtcbiAgICBzdG9yZTogbWVtb3J5U3RvcmVcbn0pO1xuXG5cblxuY29uc3Qgc2Vzc2lvbk9wdGlvbnMgPSB7XG4gICAgc2VjcmV0OiAnZDIxODg1NTYtMjhkMS00NDVmLTg3NzUtN2ZkNjRkMzQ1N2M2JyxcbiAgICBiZWFyZXJPbmx5OiB0cnVlLFxuICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IHRydWUsXG4gICAgc3RvcmU6IG1lbW9yeVN0b3JlXG59O1xuXG5hcHAudXNlKHNlc3Npb24oc2Vzc2lvbk9wdGlvbnMpKTtcbmFwcC51c2Uoa2V5Y2xvYWsubWlkZGxld2FyZSgpKTtcbmFwcC51c2Uocm91dGVyKTtcbi8vY2hhcmdlbWVudCBkZSBsJ2FwaSB0ZWFtc1JvdXRlc1xudGVhbXNSb3V0ZXMoYXBwLCByb3V0ZXIsIGtleWNsb2FrKTtcblxuLy9sYW5jZW1lbnQgZHUgc2VydmV1clxuYXBwLmxpc3RlbigzMDAwLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1NlcnZlciBydW5uaW5nIG9uIHBvcnQgMzAwMCcpO1xufSk7XG5cbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDogZmFsc2V9KSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcblxuLy9jaGFyZ2VtZXRuIGRlcyBsb2dnZXJzXG5sb2dnZXIoKTtcbiJdfQ==